dataset_path: json
dataset_kwargs:
  data_files:
    train: multistep_arithmetic_train.json
    test: multistep_arithmetic_test.json
doc_to_target: '{{answer}}'
doc_to_text: 'Question: {{question}} Answer:'
description: 'Given a question and reasoning steps, answer if there is a mistake in the reasoning steps. Write No if there are no mistakes, or the number N if there is a mistake in Thought N.'
fewshot_config:
  sampler: first_n
  samples:
  - question: "((((7 + 8) - (3 - 2)) + ((-9 * 8) * (2 * 3))) * (((0 * -8) * (-7 - -3)) + ((1 + -4) + (1 + 0)))) = Thought 1: This equation can be written as \"(A + B) * (C + D)\", where A = ((7 + 8) - (3 - 2)) and B = ((-9 * 8) * (2 * 3)) and C = (((0 * -8) * (-7 - -3)) and D = ((1 + -4) + (1 + 0)). Thought 2: Let's calculate A = ((7 + 8) - (3 - 2)) = ((7 + 8) - (1)) = (15 - 1) = 14. Thought 3: Let's calculate B = ((-9 * 8) * (2 * 3)) = ((-72) * (6)) = -432. Thought 4: Let's calculate C = (((0 * -8) * (-7 - -3)) = (((0 * -8) * (-4)) = (0 * -32) = 0. Thought 5: Let's calculate D = ((1 + -4) + (1 + 0)) = ((-3) + (1 + 0)) = (-2 + 1) = -1. Thought 6: Then, the final equation is (A + B) * (C + D) = (14 + -432) * (0 + -1) = (-418) * (-1) = 418. So the answer is 418"
    answer: No
  - question: "(((-3 - 6 - -7 + 4) - (-7 - 9 * 2 - -5)) - ((-1 + 3 * 9 * 6) - (-7 * -4 - 3 - 0))) = Thought 1: This equation can be written as \"A - B - C\", where A = (-3 - 6 - -7 + 4), B = (-7 - 9 * 2 - -5), and C = (-1 + 3 * 9 * 6) - (-7 * -4 - 3 - 0). Thought 2: Let's calculate A = (-3 - 6 - -7 + 4) = (-3 - 6 + 7 + 4) = (-2). Thought 3: Let's calculate B = (-7 - 9 * 2 - -5) = (-7 - 18 + 5) = (-20). Thought 4: Let's calculate C = (-1 + 3 * 9 * 6) - (-7 * -4 - 3 - 0) = (-1 + 162) - (28 + 3 + 0) = (134) - (31) = (103). Thought 5: Then, the final equation is A - B - C = -2 - (-20) - 103 = -105. So the answer is -105"
    answer: 1
  - question: "(((4 - -6 - -1 + 2) + (-2 * -5 - -5 * -2)) + ((5 + -1 * -2 * 9) * (-5 * -3 - 9 + 7))) = Thought 1: This equation can be written as \"(A + B) + (C * D)\", where A = (4 - -6 - -1 + 2), B = (-2 * -5 - -5 * -2), C = (5 + -1 * -2 * 9), and D = (-5 * -3 - 9 + 7). Thought 2: Let's calculate A = (4 - -6 - -1 + 2) = ((4 + 6 + 1 + 2) = (13). Thought 3: Let's calculate B = (-2 * -5 - -5 * -2) = ((-2 * -5) - (-5 * -2)) = ((10) - (10)) = (0). Thought 4: Let's calculate C = (5 + -1 * -2 * 9) = (5 + (-1 * -2) * 9) = (5 + 2 * 9) = (5 + 18) = (23). Thought 5: Let's calculate D = (-5 * -3 - 9 + 7) = ((-5 * -3) - 9 + 7) = ((15) - 9 + 7) = (9). Thought 6: Then, the final equation is (A + B) + (C * D) = (13 + 0) + (23 * 9) = (13) + (207) = 220. So the answer is 220"
    answer: 4
  - question: "(((-8 + 8 * -4 - 3) + (-1 + 5 + 6 - 4)) * ((-4 - -2 + 4 * 4) - (-9 * -2 + -8 + 3))) = Thought 1: This equation can be written as \"(A + B) * (C - D)\", where A = (-8 + 8 * -4 - 3), B = (-1 + 5 + 6 - 4), C = (-4 - -2 + 4 * 4), and D = (-9 * -2 + -8 + 3). Thought 2: Let's calculate A = (-8 + 8 * -4 - 3) = (-8 + (8 * -4) - 3) = (-8 + (-32) - 3) = (-8 - 32 - 3) = -43. Thought 3: Let's calculate B = (-1 + 5 + 6 - 4) = (-1 + 5 + 6 - 4) = (5 + 6 - 4) = (5 + 2) = 7. Thought 4: Let's calculate C = (-4 - -2 + 4 * 4) = (-4 + 2 + 4 * 4) = (-2 + 4 * 4) = (-2 + 16) = 14. Thought 5: Let's calculate D = (-9 * -2 + -8 + 3) = (-9 * -2 + -8 + 3) = (18 + -8 + 3) = (10 + 3) = 13. Thought 6: Then, the final equation is (A + B) * (C - D) = (-43 + 7) * (14 - 13) = (-36 ) * (1) = -36. So the answer is -36"
    answer: 2
  - question: "(((6 * -7 * 2 - -5) - (9 - 6 * 1 + -1)) * ((-7 - -2 - -6 * 6) * (0 - 4 * 3 + -3))) = Thought 1: This equation can be written as \"(A - B) * (C * D)\", where A = (6 * -7 * 2 - -5), B = (9 - 6 * 1 + -1), C = (-7 - -2 - -6 * 6), and D = (0 - 4 * 3 + -3). Thought 2: Let's calculate A = (6 * -7 * 2 - -5) = ((6 * -7) * 2 - -5) = ((-42) * 2 - -5) = ((-84) - -5) = -79. Thought 3: Let's calculate B = (9 - 6 * 1 + -1) = (9 - (6 * 1) + -1) = (9 - 6 + -1) = (3 + -1) = 2. Thought 4: Let's calculate C = (-7 - -2 - -6 * 6) = (-7 - -2 - (-6 * 6)) = (-7 - -2 - (-36)) = (-7 + 34) = 27. Thought 5: Let's calculate D = (0 - 4 * 3 + -3) = (0 - (4 * 3) + -3) = (0 - 12 + -3) = (-12 + -3) = -15. Thought 6: Then, the final equation is (A - B) * (C * D) = (-79 - 2) * (27 * -15) = -81 * (-405) = 32855. So the answer is 32855"
    answer: 3
  - question: "(((5 + -2 - 8) + (8 * -6 + -5)) - ((6 + 0 - 7) - (-3 - -5 * 6))) = Thought 1: This equation can be written as \"(A + B) - (C - D)\", where A = (5 + -2 - 8), B = (8 * -6 + -5), C = (6 + 0 - 7), and D = (-3 - -5 * 6). Thought 2: Let's calculate A = (5 + -2 - 8) = (5 + -2 - 8) = (5 - 10) = -5. Thought 3: Let's calculate B = (8 * -6 + -5) = (8 * -6 + -5) = (-48 + -5) = -53. Thought 4: Let's calculate C = (6 + 0 - 7) = (6 + 0 - 7) = (6 - 7) = -1. Thought 5: Let's calculate D = (-3 - -5 * 6) = (-3 - -5 * 6) = (-3 - -30) = 27. Thought 6: Then, the final equation is (A + B) - (C - D) = (-5 + -53) - (-1 - 27) = -58 - 26 = -84. So the answer is -84"
    answer: 5
  - question: "((-5 + 4 * 0 * 8) + (-2 + 6 * 6 * 4)) = Thought 1: This equation can be written as \"(A + B)\", where A = (-5 + 4 * 0 * 8) and B = (-2 + 6 * 6 * 4). Thought 2: Let's calculate A = (-5 + 4 * 0 * 8) = (-5 + (4 * 0) * 8) = (-5 + (0) * 8) = (-5 + (0)) = -5. Thought 3: Let's calculate B = (-2 + 6 * 6 * 4) = (-2 + (6 * 6) * 4) = (-2 + (36) * 4) = (-2 + (36 * 4)) = (-2 + 144) = 142. Thought 4: Then, the final equation is A + B = -5 + 142 = 137. So the answer is 137"
    answer: No
  - question: "(((6 * -2 - -6) * (9 * 5 - -9)) - ((9 - -7 + -1) - (1 - 2 - -4))) = Thought 1: This equation can be written as \"(A * B) - (C - D)\", where A = (6 * -2 - -6) and B = (9 * 5 - -9) and C = (9 - -7 + -1) and D = (1 - 2 - -4). Thought 2: Let's calculate A = (6 * -2 - -6) = (6 * -2 + 6) = (-12 + 6) = -6. Thought 3: Let's calculate B = (9 * 5 - -9) = (9 * 5 + 9) = (45 + 9) = 54. Thought 4: Let's calculate C = (9 - -7 + -1) = (9 + 7 - 1) = (15 - 1) = 14. Thought 5: Let's calculate D = (1 - 2 - -4) = (1 - 2 + 4) = (3 - 2) = 1. Thought 6: Then, the final equation is (A * B) - (C - D) = (-6 * 54) - (14 - 1) = (-324) - (13) = -337. So the answer is -337"
    answer: 3
filter_list:
  - name: "strict-match"
    filter:
      - function: "regex"
        regex_pattern: ^\s*(\d+|[a-zA-Z]+)\s*$
      - function: "take_first"
generation_kwargs:
  do_sample: false
  until:
  - 'Question:'
  - </s>
  - <|im_end|>
  - '\\n'
metric_list:
- aggregation: mean
  higher_is_better: true
  ignore_case: true
  ignore_punctuation: true
  metric: exact_match
  regexes_to_ignore:
  - ','
  - \$
  - '(?s).*#### '
  - \.$
  - '\n'
num_fewshot: 0
output_type: generate_until
repeats: 1
task: bigbench_mistake_fewshot
test_split: test
